# Comparison of AV1 and VVenC (Versatile Video Encoder)

[Aomenc GIT 12.10.2020 as AV1](https://aomedia.googlesource.com/aom/)

Encoding settings:
`av1an -fmt yuv420p10le -p 1 -s 0 -v " --threads=12 --end-usage=q --cq-level=N --cpu-used=N`
Where N is variable

[VVenc 0.1.0.0 as VVC](https://github.com/fraunhoferhhi/vvenc)

Encoding settings:
`vvencapp --size 1920x1080 --format yuv420_10 --preset N --qp N --threads 12`
Where N is variable

## Disclamer

This is the first release of VVenC. A lot of functionality is not included/restricted and will of change in future updates.

This benchmark only covers the current state of VVenC in comparison to AV1 in 'natural' content, due to the current lack of some features for encoding 'screen' content. 'Natural' content is generated by the camera, containing live footage and doesn't have 'hard' edges as animation/gameplay/screen recording.

The current version of VVenC forces GOP size of 16, which means that it forced to create additional keyframes every 16 frames which greatly reduce encoding efficiency on long scenes.

**Strongly Recommend** to check out this [Github Issue](https://github.com/fraunhoferhhi/vvenc/issues/3)
## Testing Material:

park_joy 500 frames sequence from [Xiph Media](https://media.xiph.org/video/derf/)
![](https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Source%20Screenshots/Frame%20100.png)
## VVC presets comparison:

## VMAF:
![vvc_vmaf]
## PSNR:
![vvc_psnr]
## SSIM:
![vvc_ssim]
## MS-SSIM:
![vvc_mssim]

## BD-Rates:

### What are BD-Rates?

> BD-Rate. The Bjontegaard rate difference, also known as BD-rate, allows the measurement of the bitrate reduction offered by a codec or codec feature, while maintaining the same quality as measured by objective metrics.

So the next comparison reads like:

> By switching from VVC preset Faster to Fast we need -N % bit rate (negative means we save bit rate - efficiency improves) to get same quality in objective metric Y.

> As result we need less bit rate to achieve same qualty, or achieve better quality at same bit rate.
```
VVC faster -> VVC fast

Vmaf    BD rate: -12.233 %
PSNR    BD rate: -7.562 %
SSIM    BD rate: -7.117 %
MS-SSIM BD rate: -8.811 %
Time Diff:        +20.2 %


VVC fast -> VVC medium

Vmaf    BD rate: -3.349 %
PSNR    BD rate: -4.461 %
SSIM    BD rate: -4.543 %
MS-SSIM BD rate: -5.202 %
Time Diff:        +92.6 %


VVC medium -> VVC slow

Vmaf    BD rate: -4.88 %
PSNR    BD rate: -4.852 %
SSIM    BD rate: -4.134 %
MS-SSIM BD rate: -3.799 %
Time Diff:        +196.5 %
```

## AV1 presets comparison:

## VMAF:
![av1_vmaf]
## PSNR:
![av1_psnr]
## SSIM:
![av1_ssim]
## MS-SSIM:
![av1_mssim]

## BD-Rates:
```
AOM 6 -> AOM 5

Vmaf    BD rate: -22.983 %
PSNR    BD rate: -22.72 %
SSIM    BD rate: -28.063 %
MS-SSIM BD rate: -26.59 %
Time Diff:        +26.1 %


AOM 5 -> AOM 4

Vmaf    BD rate: -11.952 %
PSNR    BD rate: -8.033 %
SSIM    BD rate: -5.537 %
MS-SSIM BD rate: -7.21 %
Time Diff:        +76.3 %


AOM 4 -> AOM 3

Vmaf    BD rate: -2.057 %
PSNR    BD rate: -3.14 %
SSIM    BD rate: -2.727 %
MS-SSIM BD rate: -3.317 %
Time Diff:        +38.8 %


AOM 3 -> AOM 2

Vmaf    BD rate: -1.007 %
PSNR    BD rate: -3.922 %
SSIM    BD rate: -2.499 %
MS-SSIM BD rate: -2.803 %
Time Diff:        +76.4 %


AOM 2 -> AOM 1

Vmaf    BD rate: -2.352 %
PSNR    BD rate: -1.791 %
SSIM    BD rate: -1.539 %
MS-SSIM BD rate: -1.452 %
Time Diff:        +45.4 %
```

## VVC vs AV1 comparison:

## VMAF:
![comparisson_vmaf]
## PSNR:
![comparisson_psnr]
## SSIM:
![comparisson_ssim]
## MS-SSIM:
![comparisson_mssim]
## BD-Rates (Sorted from worst to best):
```
AOM 6 -> VVC faster

Vmaf    BD rate: 2.32 %
PSNR    BD rate: 0.212 %
SSIM    BD rate: -22.609 %
MS-SSIM BD rate: -18.334 %
Time Diff:        +4.1 %


VVC faster -> VVC fast

Vmaf    BD rate: -12.233 %
PSNR    BD rate: -7.562 %
SSIM    BD rate: -7.117 %
MS-SSIM BD rate: -8.811 %
Time Diff:        +20.2 %


VVC fast -> VVC medium

Vmaf    BD rate: -3.349 %
PSNR    BD rate: -4.461 %
SSIM    BD rate: -4.543 %
MS-SSIM BD rate: -5.202 %
Time Diff:        +92.6 %


VVC medium -> AOM 5

Vmaf    BD rate: -10.837 %
PSNR    BD rate: -12.031 %
SSIM    BD rate: 2.811 %
MS-SSIM BD rate: 4.084 %
Time Diff:        -47.6 %


AOM 5 -> VVC slow

Vmaf    BD rate: 6.744 %
PSNR    BD rate: 8.06 %
SSIM    BD rate: -6.64 %
MS-SSIM BD rate: -7.533 %
Time Diff:        +466.2 %


VVC slow -> AOM 4

Vmaf    BD rate: -18.393 %
PSNR    BD rate: -14.928 %
SSIM    BD rate: 0.751 %
MS-SSIM BD rate: -0.317 %
Time Diff:        -68.9 %


AOM 4 -> AOM 3

Vmaf    BD rate: -2.057 %
PSNR    BD rate: -3.14 %
SSIM    BD rate: -2.727 %
MS-SSIM BD rate: -3.317 %
Time Diff:        +38.8 %


AOM 3 -> AOM 2

Vmaf    BD rate: -1.007 %
PSNR    BD rate: -3.922 %
SSIM    BD rate: -2.499 %
MS-SSIM BD rate: -2.803 %
Time Diff:        +76.4 %


AOM 2 -> AOM 1

Vmaf    BD rate: -2.352 %
PSNR    BD rate: -1.791 %
SSIM    BD rate: -1.539 %
MS-SSIM BD rate: -1.452 %
Time Diff:        +45.4 %
```

:)

[vvc_vmaf]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/VVC/VMAF.png
[vvc_psnr]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/VVC/PSNR.png
[vvc_ssim]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/VVC/SSIM.png
[vvc_mssim]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/VVC/MS-SSIM.png


[av1_vmaf]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1/VMAF.png
[av1_psnr]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1/PSNR.png
[av1_ssim]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1/SSIM.png
[av1_mssim]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1/MS-SSIM.png

[comparisson_vmaf]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1%20vs%20VVC/VMAF.png
[comparisson_psnr]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1%20vs%20VVC/PSNR.png
[comparisson_ssim]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1%20vs%20VVC/SSIM.png
[comparisson_mssim]: https://github.com/master-of-zen/AV1-benchmarks/blob/master/12.09.2020%20VVCENC%20vs%20AV1/Results/AV1%20vs%20VVC/MS-SSIM.png
